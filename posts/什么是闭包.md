---
title: 什么是闭包
date: 2024-11-30 23:25:42
author: 微光宝盒
categories:
tags:
  - JavaScript
  - 前端
---

# 什么是闭包

在JavaScript中闭包是一个很常见的概念，在代码中也常常使用，但是如果问什么是闭包可能很多人都回答不上来。那么今天我们讲一讲什么是闭包。

在JavaScript中我们说的闭包其实说的是闭包函数，所以这里问的是什么是闭包函数。这里我先给出我对闭包函数的定义。

闭包函数：一种能够跨作用域（特指函数作用域）访问的函数。

## 作用域与作用域链

在ES6之前JavaScript中只有函数作用域，当我们的JavaScript代码运行的时候首先会创建一个全局作用域，然后每声明一个函数就会创建一个子作用域，如果我们在一个函数中再声明一个函数那么就会创建一个子作用域的子作用域。

那么作用域和作用域链有什么作用呢？作用域和作用域链规定了JavaScript中变量的生命周期和变量的访问规则。变量的生命周期指的是当我们在一个作用域中声明了一个变量，那么当代码运行到此作用域中这个变量会随之创建，当此作用域运行结束变量也随之被销毁。变量的访问规则指的是在一个作用域中访问一个变量JavaScript引擎会现在当前作用域查找变量是否存在，然后在当前作用域的父作用域查找变量是否存在，以此类推直到全局作用域，可见变量的查找是按照作用域链进行查找的。

通过上面的讲述我们已经知道了在JavaScript中变量的访问规则，那么不难看出如果在父作用域中定义一个变量，我们可以在子作用域中访问到这个变量。但是如果在子作用域中定义一个变量我们能在父作用域中访问到吗？答案是不能，因为父作用域的存活时间一定长于子作用域，如果我们在子作用域创建之前访问子作用域中的变量肯定是找不到的，因为该变量还未被创建，如果我们在子作用域之后访问该变量也是找不到的，因为随着子作用域的结束该变量也被销毁了。

那么如何才能访问到子作用域中的变量呢？答案是使用闭包函数。在一个函数中定义一个变该函数作用域中变量的访问函数，然后在该函数中将此访问函数返回。那么我们就可以在函数的父作用域中得到这个访问函数，由于这个访问函数的存在，即使该函数已经调用完成，该函数创建的作用域也不会销毁。这样我们可以在父作用域中通过访问函数来获取或者修改函数作用域中的定义的变量，而这个访问函数就是闭包函数。

## 闭包能够做什么

通过以上的内容我们已经知道了什么是闭包函数，以及闭包函数的原理。那么闭包函数能够做什么呢？

1. 代码的模块化。在JavaScript的模块功能还没有被标准化的时候，JavaScript的模块第三方标准就是通过闭包实现的。

2. 延长变量的生命周期，通过以上的讲解我们知道如果闭包函数中有对函数作用域中变量的访问，那么即使函数运行结束，函数作用域也不会被销毁，这样就延长了函数中变量的生命周期。

3. 防抖和节流，我们的防抖和节流函数就是通过闭包实现的。

## 闭包的注意事项

虽然闭包有很多用处，但是在使用中还是要注意和小心的。主要是因为通过闭包我们延长了一些变量的生命周期，这样便会导致这些变量一直停留在内存中不被销毁，如果操作不当可能会导致内存泄漏的发生。
